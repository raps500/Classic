

HP Classic series opcodes


+---+---+---+---+---+---+---+---+---+---+
| <- 4bit arg ->| 0   0   0   0 | 0 | 0 |
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| <- 4bit arg ->| 0   0   0   1 | 0 | 0 | 1 -> s[n]
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| <- 4bit arg ->| 0   0   1   0 | 0 | 0 |
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| <- 4bit arg ->| 0   0   1   1 | 0 | 0 | n -> p
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| <- 4bit arg ->| 0   1   0   0 | 0 | 0 | select rom [scrambled] 0=0, 2=1, 4=2, 6=3, 8=4, A=5, C=6, E=7, left shifted   
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 0   0   1   1 | 0   1   0   0 | 0 | 0 | keys -> rom address
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| <- 4bit arg ->| 0   1   0   1 | 0 | 0 | if s[n] # 1
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| <- 4bit arg ->| 0   1   1   0 | 0 | 0 | load constant n
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| <- 4bit arg ->| 0   1   1   1 | 0 | 0 | p - 1 -> p
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| <- 4bit arg ->| 1   1   1   1 | 0 | 0 |p + 1 -> p
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| <- 4bit arg ->| 1   0   0   1 | 0 | 0 | 0 -> s[n]
+---+---+---+---+---+---+---+---+---+---+

+---+---+---+---+---+---+---+---+---+---+
| 0   0   0   0 | 1   0   1   0 | 0 | 0 | display toggle
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 0   0   1   0 | 1   0   1   0 | 0 | 0 | c exchange m
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 0   1   0   0 | 1   0   1   0 | 0 | 0 | c -> stack
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 0   1   1   0 | 1   0   1   0 | 0 | 0 | stack -> a
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 1   0   0   0 | 1   0   1   0 | 0 | 0 | display off
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 1   0   1   0 | 1   0   1   0 | 0 | 0 | m -> c
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 1   1   0   0 | 1   0   1   0 | 0 | 0 | down rotate
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 1   1   1   0 | 1   0   1   0 | 0 | 0 | clear regs
+---+---+---+---+---+---+---+---+---+---+

+---+---+---+---+---+---+---+---+---+---+
| <- 4bit arg ->| 1   0   1   1 | 0 | 0 | if p # [n]
+---+---+---+---+---+---+---+---+---+---+

+---+---+---+---+---+---+---+---+---+---+
| 1   0   0   1 | 1   1   0   0 | 0 | 0 | c -> data address
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 0   0   1   1 | 1   1   0   0 | 0 | 0 | c -> data
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 0   0   0   0 | 1   1   0   0 | 0 | 0 | return
+---+---+---+---+---+---+---+---+---+---+

+---+---+---+---+---+---+---+---+---+---+
| 1   0   1   1 | 1   1   1   0 | 0 | 0 | data -> c
+---+---+---+---+---+---+---+---+---+---+

+---+---+---+---+---+---+---+---+---+---+
|               |               | 0 | 0 |
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
|               |               | 0 | 0 |
+---+---+---+---+---+---+---+---+---+---+

Arithmetic

Fields

+---+---+---+
| 0 | 0 | 0 | P
+---+---+---+
+---+---+---+
| 0 | 0 | 1 | M
+---+---+---+
+---+---+---+
| 0 | 1 | 0 | X
+---+---+---+
+---+---+---+
| 0 | 1 | 1 | W
+---+---+---+
+---+---+---+
| 1 | 0 | 0 | WP
+---+---+---+
+---+---+---+
| 1 | 0 | 1 | MS
+---+---+---+
+---+---+---+
| 1 | 1 | 0 | XS
+---+---+---+
+---+---+---+
| 1 | 1 | 1 | S 
+---+---+---+



+---+---+---+---+---+---+---+---+---+---+
| 0   0   0   0   0 | f   f   f | 1 | 0 | if b[x] = 0
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 0   0   0   0   1 | f   f   f | 1 | 0 | 0 -> b[x]
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 0   0   0   1   0 | f   f   f | 1 | 0 | if a >= c[x]
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 0   0   0   1   1 | f   f   f | 1 | 0 | if c[xs] >= 1
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 0   0   1   0   0 | f   f   f | 1 | 0 | b -> c[w]
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 0   0   1   0   1 | f   f   f | 1 | 0 | 0 - c -> c[x]
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 0   0   1   1   0 | f   f   f | 1 | 0 | 0 -> c[xs]
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 0   0   1   1   1 | f   f   f | 1 | 0 | 0 - c - 1 -> c[s]
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 0   1   0   0   0 | f   f   f | 1 | 0 | shift left a[w]
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 0   1   0   0   1 | f   f   f | 1 | 0 | a -> b[x]
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 0   1   0   1   0 | f   f   f | 1 | 0 | a - c -> c[w]
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 0   1   0   1   1 | f   f   f | 1 | 0 | c - 1 -> c[p]
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 0   1   1   0   0 | f   f   f | 1 | 0 | c -> a[m]
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 0   1   1   0   1 | f   f   f | 1 | 0 | if c[x] = 0
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 0   1   1   1   0 | f   f   f | 1 | 0 | a + c -> c[wp]
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 0   1   1   1   1 | f   f   f | 1 | 0 | c + 1 -> c[p]
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 1   0   0   0   0 | f   f   f | 1 | 0 | if a >= b[m]
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 1   0   0   0   1 | f   f   f | 1 | 0 | b exchange c[m]
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 1   0   0   1   0 | f   f   f | 1 | 0 | shift right c[w]
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 1   0   0   1   1 | f   f   f | 1 | 0 | if a[p] >= 1 (# 0)
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 1   0   1   0   0 | f   f   f | 1 | 0 | shift right b[w]
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 1   0   1   0   1 | f   f   f | 1 | 0 | c + c -> c[w]
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 1   0   1   1   0 | f   f   f | 1 | 0 | shift right a[w]
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 1   0   1   1   1 | f   f   f | 1 | 0 | 0 -> a[w]
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 1   1   0   0   0 | f   f   f | 1 | 0 | a - b -> a[w]
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 1   1   0   0   1 | f   f   f | 1 | 0 | a exchange b[x]
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 1   1   0   1   0 | f   f   f | 1 | 0 | a - c -> a[m]
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 1   1   0   1   1 | f   f   f | 1 | 0 | a - 1 -> a[p]
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 1   1   1   0   0 | f   f   f | 1 | 0 | a + b -> a[x]
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 1   1   1   0   1 | f   f   f | 1 | 0 | a exchange c[p]
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 1   1   1   1   0 | f   f   f | 1 | 0 | a + c -> a[w]
+---+---+---+---+---+---+---+---+---+---+
+---+---+---+---+---+---+---+---+---+---+
| 1   1   1   1   1 | f   f   f | 1 | 0 | a + 1 -> a[p]
+---+---+---+---+---+---+---+---+---+---+



gsb
+---+---+---+---+---+---+---+---+---+---+
| <-- 8 bit absolute address -> | 0 | 1 |
+---+---+---+---+---+---+---+---+---+---+

go nc
+---+---+---+---+---+---+---+---+---+---+
| <- 8 bit absolute address  -> | 1 | 1 |
+---+---+---+---+---+---+---+---+---+---+
